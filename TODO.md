1. implement BeanDefinitionRegistryPostProcessor or BeanFactoryPostProcessor
2. implement SpringBootCondition.

As spring boot condition we can refuse in registering and remember type/bean name.
As factory bean post processor we can later inject the bean.
